<!DOCTYPE HTML>
<html xmlns:ng="http://angularjs.org">
  <head>
    <script type="text/javascript" src="../../lib/jquery/jquery-1.4.2.js"></script>
    <script type="text/javascript" src="../../src/angular-bootstrap.js" ng:autobind></script>
    <script type="text/javascript" src="buzz.js"></script>
    <link rel="stylesheet" type="text/css" href="buzz.css"/>
  </head>
  <body ng:init="$window.$root = this" ng:controller="BuzzController">
  <div>
    <span>&lt;angular/&gt; Buzz</span>
    <span>
      filter:
      <input type="text" name="filterText"/>
    </span>
    <span>
      <form ng:submit="$location.hashPath = userId">
        user:
        <input type="text" name="userId" ng:required/>
        <button ng:click="$location.hashPath = userId">fetch</button>
      </form>
    </span>
  </div>
  <ul>
    <li ng:repeat="item in activities.data.items.$filter(filterText)">
      <h1>
        <img ng:src="{{item.actor.thumbnailUrl}}"/>
        <a href="{{item.actor.profileUrl}}">{{item.actor.name}}</a>
        <a href="" ng:click="expandReplies(item)">Replies: {{item.links.replies[0].count}}</a>
      </h1>
      <div>
        {{item.object.content | html}}
        <div>
          <a href="{{attachment.links.enclosure[0].href}}" ng:repeat="attachment in item.object.attachments">
            <img ng:src="{{attachment.links.preview[0].href}}"/>
          </a>
        </div>
      </div>
      <my:expand expand="item.replies.show">
        <ul>
          <li ng:repeat="reply in item.replies.data.items">
            <img ng:src="{{reply.actor.thumbnailUrl}}"/>
            <a href="{{reply.actor.profileUrl}}">{{reply.actor.name}}</a>:
            {{reply.content | html}}
          </li>
        </ul>
      </my:expand>
    </li>
  </ul>
  </body>
</html>
